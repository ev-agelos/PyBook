{% extends 'base.html' %}

{% block title %}Bookmarks{% endblock title %}

{% block content %}
    

    <p>Category:<strong> {{category_name}}</strong></p>
    <ul>
        <li style="display:inline; padding: 8px;"><a href="">newest</a></li>
        <li style="display:inline; padding: 8px;">|</li>
        <li style="display:inline; padding: 8px;"><a href="">oldest</a></li>
        <li style="display:inline; padding: 8px;">|</li>
        <li style="display:inline; padding: 8px;"><a href="">top</a></li>
        <li style="display:inline; padding: 8px;">|</li>
        <li style="display:inline; padding: 8px;"><a href="">unpopular</a></li>
        <li style="display:inline; padding: 8px;">|</li>
    </ul>
    <ul>
        {% for item in bookmarks.items %}
            <li style="display:block;">
            <div>
                <div id="votes" style="clear:both;float:left; margin-right: 20px">
                    <div style="display:block">
                        {% if g.user.is_authenticated() and g.user._id != item[0].user_id %}
                            {% set up_vote_color = ''%}
                            {% if item[2].direction == True %} {% set up_vote_color = 'rgb(255, 102, 0)' %} {% endif %}
                            <input type="Button" value="&#9650;" style="color: {{up_vote_color}}" id="up_vote{{loop.index}}" onClick="vote({{loop.index}}, '{{item[0].title}}', 1)">
                        {% else %}
                            <input type="Button" disabled value="&#9650;" style="color: {{up_vote_color}}" id="up_vote{{loop.index}}" onClick="vote({{loop.index}}, '{{item[0].title}}', 1)">
                        {% endif %}
                    </div>

                    <div id="{{ loop.index }}" style="display:block; text-align: center; font-size: 1.2em;">
                        {{ item[0].rating }}
                    </div>

                    <div style="display:block;">
                        {% if g.user.is_authenticated() and g.user._id != item[0].user_id %}
                            {% set down_vote_color = ''%}
                            {% if item[2].direction == False %} {% set down_vote_color = 'rgb(255, 102, 0)' %} {% endif %}
                            <input type="Button" value="&#9660;" style="color: {{down_vote_color}}" id="down_vote{{loop.index}}" onClick="vote({{loop.index}}, '{{item[0].title}}', -1)">
                        {% else %}
                            <input type="Button" disabled value="&#9660;" style="color: {{down_vote_color}}" id="down_vote{{loop.index}}" onClick="vote({{loop.index}}, '{{item[0].title}}', -1)">
                        {% endif %}
                    </div>
                </div>

                <div id="title" style="float:left;">

                    <div style="font-size: 1.2em;">
                        <a href={{item[0].url}} target="_blank">{{item[0].title}}</a>
                    </div>

                    <div>
                        <strong>Submitted on: </strong>{{item[0].created_on}} <strong> by</strong> <a href={{url_for('get_users', username=item[1].username)}} target='_blank'>{{item[1].username}}</a>
                    </div>

                    {% if item[0].user_id == g.user._id %}
                        <div>
                            <form action={{ url_for('update_bookmark', title=item[0].title) }} method="GET" style="display:inline">
                                <input type="submit" value="Edit">
                            </form>
                        </div>
                    {% endif %}
                </div>
            </div>
            </li>
        {% endfor %}
    </ul>

    <div id="nav-buttons" style="clear:both">
        {% if bookmarks.has_prev %}
            <a href="{{url_for(request.endpoint, page=bookmarks.prev_num, **request.view_args)}}">‹ prev</a>
        {% endif %}
        | 
        {% if bookmarks.has_next %}
            <a href="{{url_for(request.endpoint, page=bookmarks.next_num, **request.view_args)}}">next ›</a>
        {% endif %}
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">var csrftoken = "{{ csrf_token() }}"</script>
    <script type="text/javascript" src="{{ url_for('static', filename='/js/my_script.js')}}"></script>

{% endblock content %}
